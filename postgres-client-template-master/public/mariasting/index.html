<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Postgres node.js template med d3.js</title>
  <script type="text/javascript" src="d3.js"></script>
  <style type="text/css"></style>
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
  <img id="logo" src="logo2.png" alt="logo" />

  <!--Section1--------------------------------->
  <div class="main" id="section1">
    <h1 id="head-s1">+5춿C</h1>
    <br>
    <p id="text-s1">Velkommen til ferieparadiset Danmark</p>
    <div class="scrollknap"> 
      <a href="#section2" class="next round" id="s1">&#8744</a>
    </div>
  </div>
  
  <!--Section2-------------------------------->
  <div class="main" id="section2">
    <p id="text-s2">Danmarks temperatur칝ndring i %</p>
    <h2>...</h2>
    <div class="scrollknap"> 
      <a href="#section3" class="next round" id="s2">&#8744</a>
    </div>
  </div>

  <!--Section3------------------------------->
  <div class="main" id="section3">
    
    <p id="text-s3">S친dan fordeler temperaturudviklingen sig i Danmark</p>
    <div id="section3-vl-div"></div> 
    <div id="section3-vl2-div"></div> 
    </style>
    </head>
    <body style="background-color: #b3d0f1"></bodybody>
        <!-- Create a div where the graph will take place -->
    <div class="hest">
    <h2 class="section3-h2">Esbjerg</h2>
    <h2 class="section3-h2">Nyborg</h2>
    <h2 class="section3-h2">Randers</h2>
    <h2 class="section3-h2">Frederikshavn</h2>
    </div>
    
    <p>13,45춿</p>
    <p2>8,45춿</p>
    
    <div class="row">
      <div class="column" id="c1s3"> <!--column1, section3-->
        <h2>..</h2>
      </div>

      <div class="column" id="c2s3" ><!--column2, section3-->
        <p class="positive-static" id="fish"><img class="img-s3" src="fish.png" alt="fish" />I Esbjerg er det nu muligt at fange hajer, ansjoser tun og sv칝rdfisk som nu trives i de danske farvande</p>
        <p class="positive-static" id="wine"><img class="img-s3" src="wine.png" alt="wine" />Livet som vinbonde bliver s칝rligt rentabelt. Nyborg bliver det nye bourdeaux, da drueh칮sten bliver f칝nomenal</p>
        <p class="positive-static" id="parrot"><img class="img-s3" src="parrot.png" alt="parrot" />Randers regnskov kan nu udvide udend칮rs da flere subtropiske dyr nu kan overleve i det fri</p>
        <p class="positive-static" id="palm"><img class="img-s3" src="palm-tree.png" alt="palm" />Palmestranden i Frederikshavn er k친ret til Danmarks 칝ldste, da palmerne nu kan overleve vinteren afd칝kket</p>
      </div>
    </div>

    <div class="scrollknap"> 
      <a href="#section4" class="next round" id="s3">&#8744</a>
    </div>
  </div>
  
  <!--Section4------------------------------>
  <div class="main" id="section4">
    <p id="text-s4">Find din egen kommune og se hvor varmt der bliver i dit lokalomr친de</p>

    <div class="row">
      <div class="column" id="c1s4"> <!--column1, section4-->
        <h2>..</h2>
        
      </div>

      <div class="column" id="c2s4"> <!--column2, section4-->
        <div class="flip-box-all">
          <div class="flip-box">
            <div class="flip-box-inner" id="box1">
              <div class="flip-box-front">
                <p class="positive-preflip" id="fish2"><img class="img1-s4" src="fish.png" alt="fish" />I Esbjerg er det nu muligt at fange hajer, ansjoser, tun og sv칝rdfisk som nu trives i de danske farvande</p>
              </div>
              <div class="flip-box-back">
                <p class="negative-backflip" id="water"><img class="img2-s4" src="no-water.png" alt="vand"/> 5 milliarder mennesker kommer til at bo i omr친der med vandmangel</p>
              </div>
            </div>
          </div>
      
          <div class="flip-box">
            <div class="flip-box-inner"  id="box2">
              <div class="flip-box-front">
                <p class="positive-preflip" id="wine2"><img class="img1-s4" src="wine.png" alt="wine" />Livet som vinbonde bliver s칝rligt rentabelt. Nyborg bliver det nye bourdeaux, da drueh칮sten bliver f칝nomenal</p>
              </div>
              <div class="flip-box-back">
                <p class="negative-backflip" id="wheat"><img class="img2-s4" src="wheat.png" alt="hvede"/>En tredjedel af f칮devareproduktionen forventes at forsvinde</p>
              </div>
            </div>
          </div>
      
          <div class="flip-box">
            <div class="flip-box-inner" id="box3"> 
              <div class="flip-box-front">
                <p class="positive-preflip" id="parrot2"><img class="img1-s4" src="parrot.png" alt="parrot" />Randers regnskov kan nu udvide udend칮rs da flere subtropiske dyr nu kan overleve i det fri</p>
              </div>
              <div class="flip-box-back">
                <p class="negative-backflip" id="heat"><img class="img2-s4" src="global-warming.png" alt="varme"/>D칮dbringende hedeb칮lger vil udg칮re en trussel for over 60% af verdensbefolkningen</p>
              </div>
            </div>
          </div>
      
          <div class="flip-box">
            <div class="flip-box-inner" id="box4">
              <div class="flip-box-front">
                <p class="positive-preflip" id="palm2"><img class="img1-s4" src="palm-tree.png" alt="palm" />Palmestranden i Frederikshavn er k친ret til Danmarks 칝ldste, da palmerne nu kan overleve vinteren afd칝kket</p>
              </div>
              <div class="flip-box-back">
                <p class="negative-backflip" id="migration"><img class="img2-s4" src="migration.png" alt="flygtninge"/>Cirka 1/5 af klodens befolkning, bliver flygtninge, da deres hjemlande bliver for varme i sommerm친nederne</p> 
              </div>
            </div>
          </div>
        </div>  
      </div>
    </div>
    
      
    <div class="scrollknap"> 
      <a href="#section5" class="next round" id="s4">&#8744</a>
    </div>
  </div>
  
  <!--Section5-------------------------------->
  <div class="main" id="section5">
    <h1 id="head-s5">Imens du nyder din hjemmedyrkede vin <br> pas p친 den ikke giver d친rlig smag i munden <br> n친r resten af verden lider</h1>
    <p id="text-s5">Formindsk DIT klimaaftryk nu!</p>
      <form>
        <button class="buttons" id="transport" type="submit"
        formaction="https://www.klimaklogt.dk/guides/transport/">Transport</button>
      </form>
      
      <form>
        <button class="buttons" id="politik" type="submit"
          formaction="https://www.klimaklogt.dk/guides/politik/">Politik</button>
      </form>

      <form>
        <button class="buttons" id="mad" type="submit"
          formaction="https://www.klimaklogt.dk/guides/madspild/">Madspild</button>
      </form>
      <p id="streg">_______________________________________________________<p>
      <div id="linkblok">
        <p id="links">
        <a href="https://www.dmi.dk/klimaatlas/">[1]</a>
        DMI, <i>Klimaatlas - Vejr칝ndring 친r 2071-2100</i>
        <br>
        <a href="https://www.zetland.dk/historie/sOPVXmlK-aOMNamWw-638d6">[2]</a>
        Zetland, <i>"S친dan ser dit liv ud i en fem grader varmere fremtid"</i>
        <br>
        <a href="https://www.klimaklogt.dk/guides/">[3]</a>
        Naturfredningsforeningen, <i>Guides til en klimaklog hverdag</i>
      <p>
      </div>
  </div>

  <!--SCRIPT---------------------------------------------------------------------------------------------------------------------------->
  <script type="text/javascript">

    /////////////// Nedenst친ende er svg til Section2 //////////////////
    const data = ["grey", "grey", "grey"]

    const svg = d3.select("#section2")
    .append("svg")
    .attr("width", "100%")
    .attr("height", "100%");
    
    svg.selectAll("circle")
    .data(data)
    .enter()
    .append("circle")
    .attr("cx", function(d, i) { return i * 100 + 50; } ) 
    .attr("cy", 200)
    .attr("r", 25)
    .attr("fill", function(d) { return d; } );
    
    d3.select("#s1")
    .on("click", function () {
    
      d3.selectAll("circle")
        .transition() 
        .duration(1500)
        .ease(d3.easeBounceIn)
        .delay(function(d, i) { return 500 + i * 150; } )
        .attr("cy", 50)
    
        .transition() 
        .duration(500)
        .ease(d3.easeLinear)
        .delay(function(d, i) { return 20 + i * 150; } )
        .attr("cy", 200)
    });
    /////////////// Ovenst친ende er svg til Section2 //////////////////


    /////////////// Nedenst친ende er svg til Section3 //////////////////
    d3.json("api/Temperatur", {method: "GET",
    }).then(function(response){

      console.log(response);
        //SKRIV KODEN HER
        var dataset = response.data;
function dataForLooper(start,length,datasetFrom){
var datasetAddTo = []
for (let i = start; i < length; i++) {
    datasetAddTo.push(datasetFrom[i]);
}
return datasetAddTo;
}
var data1 = dataForLooper(43,44,dataset); 
var data2 = dataForLooper(243,244,dataset);
var data3 = dataForLooper(263,264,dataset);
var data4 = dataForLooper(71,72,dataset)
//Esbjerg = data1
//Nyborg = data2
//Randers = data3
//Frederikshavn = data4

//var data4 = [] // ALT HER KAN BRUGES TIL AT FINDE ET DATASET!
//for (let i = 68; i < 72; i++) {
//   data4.push(dataset[i])
//console.table(data4)
 // ALT HER KAN BRUGES TIL AT FINDE ET DATASET!/
var svg = d3.select("body")
.append("svg")
.attr("height", 1000)
.attr("width", 600);

var dinfar = data1.concat(data2,data3,data4) //Viser den fjerde bar for alle data# 游뗵
var bars = svg.selectAll("rect")
        .data(dinfar)
        .enter()
        .append("rect")
        .attr("height", function(d, i){
            console.log(d.temp);
            return 20;
           // return 100 + (i * 10) + 10 * i;
        })
        .attr("width", function(d){
            return d.temp * 30
        })
        .attr("x", 20)

        .attr("y",function(d,i){
            return 29 + (i * 35) + 15 * i;})
            .attr("fill", "rgb(58, 158, 78")


        //Viser tekst til barene 游뗵
        var datatext = [1,2,3,4];
        svg.selectAll("text")
        .data(datatext)
        .enter()
        .append("text")
        .attr("x", 330)
        .attr("fill", "whitesmoke")
        .attr("y",function(d,i){
            return 44 + (i * 42) + 8 * i;})
        .text(function (d,i) {
            console.log("d: "+d)
            switch (d) {
                case 1:
                    return data1[0].temp+"춿";
              case 2:
                  return data2[0].temp+"춿";
                case 3:
                    return data3[0].temp+"춿";
                case 4:
                    return data4[0].temp+"춿";
            }
            //Viser alle 4 h칮jeste grader 游뗵
        });




//HER SLUTTER KODEN
//console.log(response.data) //Viser al data (396 Arrays)
//console.log(response.data[0].temp) //Viser f칮rste temp
//console.log(response.data[1].temp) //Viser anden temp
//console.log(response.data[2].temp) //Viser tredje temp
//console.log(response.data[3].temp) //Viser fjerde temp
    })
    /////////////// Ovenst친ende er svg til Section3 //////////////////


    /////////////// Nedenst친ende er svg til Section4 //////////////////

    const data4 = ["magenta"]

    const svg4 = d3.select("#c1s4")
      .append("svg")
      .attr("width", "100%")
      .attr("height", "100%");
            
    svg4.selectAll("polygon")
      .data(data4)
      .enter()
      .append("polygon")
      .attr("points", "125,50 50,200 200,200")
      .attr("fill", function(d) { return d; } );
            
    d3.select("#s3")
      .on("click", function () {

        d3.selectAll("polygon")
          .transition() 
          .duration(2000)
          .attr("points", "50,200 200,200 125,50")
          .attr("fill", "orange")

          .transition()
          .duration(2000)
          .attr("points", "125,50 50,200 200,200")
          .attr("fill", "magenta")
      });


      /////FLIP BOXES
      function change() {
      const elements = document.querySelectorAll(".flip-box");
        for (let element of elements) {
      element.classList.toggle("transformed-state");
       }
      }

      const changeButton = document.querySelector("#s3");
      changeButton.addEventListener("click", change);
      /////
       
    /////////////// Ovenst친ende er svg til Section4 //////////////////
  </script>
</body>

</html>