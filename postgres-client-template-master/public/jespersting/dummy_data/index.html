<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" src="d3.js"></script>
  <title><Bdo>backend_data</Bdo></title>
</head>

<body>

  <script>

    d3.json("api/By", {
      method: "GET",
    }).then(function (by_response) {
      d3.json("api/Temperatur", {
        method: "GET",
      }).then(function (temperatur_response) {

        const temperatur_dataset = temperatur_response.data;
        const by_dataset = by_response.data;

        var dropdown = d3
          .select("body")
          .append("select")
          .attr("By", "name")
          .attr("id", "drop", "by_id")

          .on("change", function (d) {
            var selectedOption = d3.select("#drop").property("value")
            var by_id = temperatur_dataset.filter(x => x.by_id == selectedOption)
            console.log(selectedOption, by_id[0].max)

          });
        var option = dropdown
          .selectAll("option")
          .data(by_dataset)
          .enter()
          .append("option")


        option.text(function (d, i) {

          return d.by;
        })

          .attr("value", function (d) {
            return d.id;


          })
      })

    });

  </script>

</body>

</html>