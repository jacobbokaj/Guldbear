<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="d3.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bar ðŸ”¥</title>
    <style>
 
h2{
    text-align:right;
}
.hest{
    width: 180; float: left;
}


</style>
</head>
<body>



    <!-- Create a div where the graph will take place -->
<div class="hest">
<h2 class="data4">Esbjerg</h2>
<h2 class="data3">Nyborg</h2>
<h2 class="data2">Randers</h2>
<h2 class="data1">Frederikshavn</h2>
</div>

</body>

<script>


     var temperatur=""; 
     var by="";  
  
d3.json("api/By", {method: "GET",
}).then(function(by_response){
    d3.json("api/Temperatur",{method: "GET",
    }).then(function(temperatur_response){

    const temperatur_dataset = temperatur_response.data;
    const by_dataset = by_response.data;

    var dropdown = d3
    .select("body")
    .append("select")
    .attr("By", "name"); 
    
    var option = dropdown
    .selectAll("option")
    .data(by_dataset)
    .enter()
    .append("option")

    option.text(function(d,i){
    
        return d.by; 
    }) 
    
    .attr("value", function (d) {
        return d;
    



    /*
    
    });
    d3.selectAll('option')
    .on('change', function() {
        console.log("hej222")

    function onchange(){
        console.log("hej")
    } */ 

    }) 

    }); 
}); 

   
        //SKRIV KODEN HER CUNT
        var dataset = response.data;
function dataForLooper(start,length,datasetFrom){
var datasetAddTo = []
for (let i = start; i < length; i++) {
    datasetAddTo.push(datasetFrom[i]);
}
return datasetAddTo;
}
var temperatur_dataset
//Esbjerg = data1
//Nyborg = data2
//Randers = data3
//Frederikshavn = data4

//var data4 = [] // ALT HER KAN BRUGES TIL AT FINDE ET DATASET!
//for (let i = 68; i < 72; i++) {
//   data4.push(dataset[i])
//console.table(data4)
 // ALT HER KAN BRUGES TIL AT FINDE ET DATASET!/
var svg = d3.select("body")
.append("svg")
.attr("height", 1000)
.attr("width", 600);
var dinfar = temperatur_dataset.concat(temperatur_dataset) //Viser den fjerde bar for alle data# ðŸ™‚
var bars = svg.selectAll("rect")
        .data(dinfar)
        .enter()
        .append("rect")
        .attr("height", function(d, i){
            console.log(d.temp);
            return 20;
           // return 100 + (i * 10) + 10 * i;
        })
        .attr("width", function(d){
            return d.temp * 30
        })
        .attr("x", 200)

        .attr("y",function(d,i){
            return 25 + (i * 35) + 15 * i;})
        .attr("fill", "green")


        //Viser tekst til barene ðŸ™‚
        var datatext = [1,2,3,4];
        svg.selectAll("text")
        .data(datatext)
        .enter()
        .append("text")
        .attr("x", 205)
        .attr("fill", "whitesmoke")
        .attr("y",function(d,i){
            return 40 + (i * 42) + 8 * i;})
        .text(function (d,i) {
            console.log("d: "+d)
            switch (d) {
                case 1:
                    return temperatur_dataset[0].temp+"Â°";
              case 2:
                  return data2[0].temp+"Â°";
                case 3:
                    return data3[0].temp+"Â°";
                case 4:
                    return data4[0].temp+"Â°";
            }
            //Viser alle 4 hÃ¸jeste grader ðŸ™‚
        });

        //ALT HERFRA ER ET GÃ†T?



//HER SLUTTER KODEN CUNT
//console.log(response.data) //Viser al data (396 Arrays)
//console.log(response.data[0].temp) //Viser fÃ¸rste temp
//console.log(response.data[1].temp) //Viser anden temp
//console.log(response.data[2].temp) //Viser tredje temp
//console.log(response.data[3].temp) //Viser fjerde temp

</script>
</html>